<div class="flex flex-col p-6 w-full gap-5">
    <ng-container *ngIf="application">
        <mat-stepper
            [linear]="true"
            [selectedIndex]= "findCurrentStageId()">
            <mat-step
                *ngFor="let stage of application.job.jobStages"
                [editable]="false"
                [completed]="isTheStageCompleted(application, stage)"
            >
                <ng-template matStepLabel>{{stage.stageTitle}}</ng-template>
                <div class="flex flex-col gap-7 w-full">
                    <img
                        class="company-img"
                        src="{{ application.job.company.image_url }}"
                    />
                    <p class="title">
                        {{ application.user.name + " " + application.user.surname }}
                    </p>
                    <p class="font-medium">
                        Hi! Please carefully take a look at the applicant
                        profile and choose the appropriate actions from the below list!
                    </p>
                    <ng-container>
                        <mat-stepper orientation="vertical" #stepper>
                            <mat-step
                                *ngFor="let experience of application.user.experience"
                            >
                                <div class="flex flex-col gap-3">
                                    <ng-template matStepLabel
                                    ><span class="text-2xl">{{
                                        experience.positionTitle
                                        }}</span></ng-template
                                    >
                                    <p>
                                        <span class="label">Company: </span>
                                        <span
                                            [style.color]="'var(--primary)'"
                                            class="font-medium"
                                        >{{ experience.companyName }}</span
                                        >
                                    </p>
                                    <p style="white-space: pre-line">
                                        <span class="label">Description:</span>
                                        {{ experience.description }}
                                    </p>
                                    <p>
                                        <span class="label">Start Date:</span>
                                        {{ experience.startDate | date }}
                                    </p>
                                    <p>
                                        <span class="label">End Date:</span>
                                        {{ experience.endDate | date }}
                                    </p>
                                </div>
                            </mat-step>
                        </mat-stepper>
                    </ng-container>
                    <div class="flex gap-5 w-full">
                        <button mat-button class="primary w-full" (click)="moveApplicationStatus(determineNextAction().id)">
                            Move to stage {{determineNextAction().stageTitle}}
                        </button>
                        <button mat-button class="primary-inverse w-full" (click)="moveApplicationStatus(rejectionActionId)">
                            Reject
                        </button>
                    </div>
                </div>
            </mat-step>
        </mat-stepper>
        <mat-divider></mat-divider>
    </ng-container>

</div>










       <!-- <mat-stepper
            [linear]="true"
            [selectedIndex]="
                application.status === EStatus.SCREENING
                    ? 1
                    : application.status === EStatus.DECISION
                    ? 2
                    : 0
            "
        >
            <mat-step
                [editable]="false"
                [completed]="
                    application.status === EStatus.SCREENING ||
                    application.status === EStatus.DECISION
                "
            >
                <ng-template matStepLabel>Processed</ng-template>
                <div class="flex flex-col gap-7 w-full">
                    <img
                        class="company-img"
                        src="{{ application.job.company.image_url }}"
                    />
                    <p class="title">
                        {{ application.user.name + " " + application.user.surname }}
                    </p>
                    <p class="font-medium">
                        Hi! Please carefully take a look at the applicant
                        profile and choose - whether to invite the applicant to
                        an interview or not.Choose the corresponding action
                        below.
                    </p>
                    <ng-container>
                        <mat-stepper orientation="vertical" #stepper>
                            <mat-step
                                *ngFor="let experience of application.user.experience"
                            >
                                <div class="flex flex-col gap-3">
                                    <ng-template matStepLabel
                                        ><span class="text-2xl">{{
                                            experience.positionTitle
                                        }}</span></ng-template
                                    >
                                    <p>
                                        <span class="label">Company: </span>
                                        <span
                                            [style.color]="'var(&#45;&#45;primary)'"
                                            class="font-medium"
                                            >{{ experience.companyName }}</span
                                        >
                                    </p>
                                    <p style="white-space: pre-line">
                                        <span class="label">Description:</span>
                                        {{ experience.description }}
                                    </p>
                                    <p>
                                        <span class="label">Start Date:</span>
                                        {{ experience.startDate | date }}
                                    </p>
                                    <p>
                                        <span class="label">End Date:</span>
                                        {{ experience.endDate | date }}
                                    </p>
                                </div>
                            </mat-step>
                        </mat-stepper>
                    </ng-container>
                    <div class="flex gap-5 w-full">
                        <button mat-button class="primary w-full" (click)="moveApplicationStatus(EStatus.SCREENING)">
                            Invite to screening
                        </button>
                        <button mat-button class="primary-inverse w-full" (click)="moveApplicationStatus(EStatus.REJECTED)">
                            Reject
                        </button>
                    </div>
                </div>
            </mat-step>
            <mat-step
                [editable]="false"
                [completed]="application.status === EStatus.DECISION"
            >
                <ng-template matStepLabel>Screening interview</ng-template>
                <div class="flex flex-col gap-10">
                    <p class="title">{{ application.job.company.name }}</p>
                    <img
                        class="company-img"
                        src="{{ application.job.company.image_url }}"
                    />
                    <p class="desc">
                        Dear applicant, we are pleased to invite you to the
                        interview for the position
                        <strong>{{ application.job.title }}</strong
                        >. Our hiring manager will reach you out for the
                        details. Afterwards, the
                        <strong>Hiring decision</strong> staged will be
                        unlocked.
                    </p>
                </div>
            </mat-step>
            <mat-step>
                <ng-template matStepLabel>Hiring Decision</ng-template>
                <div class="flex flex-col gap-10">
                    <p class="title">{{ application.job.company.name }}</p>
                    <img
                        class="company-img"
                        src="{{ application.job.company.image_url }}"
                    />
                    <p class="desc" *ngIf="application.hired; else rejection">
                        Dear applicant, <strong>Congratulations!</strong> We are
                        pleased hire you for the position
                        <strong>{{ application.job.title }}</strong
                        >. Our hiring manager will reach you out for the
                        details.
                    </p>
                    <ng-template #rejection
                        ><p class="desc">
                            Dear applicant, unfortunately, at the moment we had
                            another candidate who was a better fit. Good luck,
                            and do not hesitate to apply again.
                        </p></ng-template
                    >
                </div>
            </mat-step>
        </mat-stepper>
  -->
